#!/usr/bin/env zsh

############################################################# 
# qq-exploit
#############################################################

qq-exploit-help() {
  cat << END

qq-exploit
----------
The exploit namespace provides commands 

Commands
--------
qq-exploit-install: installs dependencies
qq-exploit-nmap-search: use searchsploit with an nmap xml results file


END
}

qq-exploit-install() {


}


qq-exploit-nmap-search() {
    local f && read"f?$(__cyan XML: )"
    print -z "searchsploit -x --nmap ${f}"
}

qq-exploit-compile-c-win32() {
  local src && read "src?$(__cyan SOURCE: )"
  local out && read "out?$(__cyan OUTPUT: )"
  print -z "i686-w64-mingw32-gcc ${src} -o ${out}"
}

qq-exploit-compile-c-win64() {
  local src && read "src?$(__cyan SOURCE: )"
  local out && read "out?$(__cyan OUTPUT: )"
  print -z "x86_64-w64-mingw32-gcc ${src} -o ${out}"
}

qq-exploit-compile-c++-win32() {
  local src && read "src?$(__cyan SOURCE: )"
  local out && read "out?$(__cyan OUTPUT: )"
  print -z "i686-w64-mingw32-g++ ${src} -o ${out}"
}

qq-exploit-compile-c++-win64() {
  local src && read "src?$(__cyan SOURCE: )"
  local out && read "out?$(__cyan OUTPUT: )"
  print -z "x86_64-w64-mingw32-g++ ${src} -o ${out}"
}

qq-exploit-compile-notes-winsock() {
  __info "use -lws2_32"
}

qq-exploit-compile-notes-static() {
  __info "-static-libstdc++"
  __info "-static-libgcc"
}

qq-exploit-evade-upx() {
    local f && read "f?$(__cyan FILE: )"
    print -z "wine upx -9 ${f}"
}